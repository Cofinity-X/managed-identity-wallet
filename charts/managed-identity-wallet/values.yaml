# /********************************************************************************
# * Copyright (c) 2021,2023 Contributors to the Eclipse Foundation
# *
# * See the NOTICE file(s) distributed with this work for additional
# * information regarding copyright ownership.
# *
# * This program and the accompanying materials are made available under the
# * terms of the Apache License, Version 2.0 which is available at
# * https://www.apache.org/licenses/LICENSE-2.0.
# *
# * Unless required by applicable law or agreed to in writing, software
# * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# * License for the specific language governing permissions and limitations
# * under the License.
# *
# * SPDX-License-Identifier: Apache-2.0
# ********************************************************************************/

# -- The amount of replicas to run
replicaCount: 1

# -- Image of the main container
image:
  # -- Image repository
  repository: ghcr.io/catenax-ng/tx-managed-identity-wallets_miw_service
  # -- PullPolicy
  pullPolicy: Always
  # -- Image tag (empty one will use "appVersion" value from chart definition)
  tag: ""

# -- Credentials name for private repos
imagePullSecrets: []

nameOverride: ""
fullnameOverride: ""

# -- Parameters for the application (will be stored as secrets - so, for passwords, ...)
secrets:
  KEYCLOAK_CLIENT_ID: ""
  ENCRYPTION_KEY: ""  # 64 chars

# -- Parameters for the application (will be provided as plain environment variables)
envs:
  APPLICATION_ENVIRONMENT: "dev"
  USE_SSL: false
  DB_POOL_SIZE:
  KEYCLOAK_MIW_PUBLIC_CLIENT: ""
  MANAGEMENT_PORT:
  MIW_HOST_NAME: localhost
  AUTHORITY_WALLET_BPN: ""
  AUTHORITY_WALLET_NAME: ""
  AUTHORITY_WALLET_DID: ""
  VC_SCHEMA_LINK: ""
  VC_EXPIRY_DATE: ""
  KEYCLOAK_REALM: ""
  AUTH_SERVER_URL: ""

# -- ServiceAccount configuration
serviceAccount:
  create: true
  annotations: {}
  name: ""

# -- Service configuration
service:
  type: ClusterIP
  port: 8080

# -- Ingress configuration
ingress:
  enabled: false
  annotations: {}
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

# -- PodSecurityContext
podSecurityContext: {}

# -- Preconfigured SecurityContext
securityContext:
  privileged: false
  allowPrivilegeEscalation: false
  runAsNonRoot: true
  runAsGroup: 11111
  runAsUser: 11111

# -- Resource boundaries
resources:
  requests:
    cpu: 250m
    memory: 500Mi
  limits:
    cpu: 4
    memory: 1Gi

# -- NodeSelector configuration
nodeSelector:
  "kubernetes.io/os": linux

# -- Tolerations configuration
tolerations: []

# -- Affinity configuration
affinity: {}

# -- PodAnnotation configuration
podAnnotations: {}

# -- Simple Postgresql backup solution (Dump data to second PV)
backup:
  # -- Backup database
  database:
    # -- Enable / Disable the backup
    enabled: false
    # -- Backup schedule (help: https://crontab.guru)
    cron: "* */6 * * *"
    # -- Storage configuration
    storage:
      # -- Set to true, if the PV should stay even when the chart release is uninstalled
      keepStorage: true
      # -- Disk size for backup content
      diskSize: 10G
      # -- storageClassName
      storageClassName: "-"

postgresql:
  external:
    enabled: false
    config:
      host: ""
      port: 5432
      database: ""
    auth:
      username: ""
      password: ""
      existingSecret: ""
      existingSecretKey: password

  # @ignored
  auth:
    username: miw
    database: miw
